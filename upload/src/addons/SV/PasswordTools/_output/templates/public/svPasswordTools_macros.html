<xf:macro name="password_row" arg-inputName="password" arg-password="{{ null }}" arg-label="{{ phrase('password') }}" arg-explain="{{ null }}" arg-noPasswordStrength="{{ false }}">
	<xf:formrow rowtype="input" label="{{ $label }}" hint="{{ phrase('required') }}" explain="{{ $explain }}" data-xf-init="password-input">
		<xf:macro name="password_input" arg-inputName="{{ $inputName }}" arg-password="{{ $password }}" arg-noPasswordStrength="{{ $noPasswordStrength }}" />
	</xf:formrow>
</xf:macro>

<xf:macro name="password_input" arg-inputName="password" arg-password="{{ null }}" arg-required="{{ true }}" arg-disabled="{{ false }}" arg-noPasswordStrength="{{ false }}">
	<xf:if is="$xf.options.svPasswordToolsCheckTypes.zxcvbn">
		<xf:js src="sv/vendor/dropbox/zxcvbn/zxcvbn.js" addon="SV/PasswordTools" />
		<xf:js>
			jQuery.extend(XF.phrases, {
				svPasswordTools_show_password: "{{ phrase('svPasswordTools_show_password')|escape('js') }}",
				svPasswordTools_hide_password: "{{ phrase('svPasswordTools_hide_password')|escape('js') }}"
			});
		</xf:js>
	</xf:if>

	<xf:js src="sv/passwordtools/password_input.js" addon="SV/PasswordTools" min="1" />
	<xf:css src="svPasswordTools_macros.less" />

	<div class="inputGroup inputGroup--joined {{ !$noPasswordStrength ? 'inputGroup--password-strength' : '' }}">
		<xf:textbox name="{{ $inputName }}" type="password" value="{{ $password }}" autocomplete="off" required="{{ $required ? 'required' : '' }}" disabled="{{ $disabled }}" />
		<button type="button" tabindex="-1" class="inputGroup-text inputPassword-button inputPassword-button--show" title="{{ phrase('svPasswordTools_show_password') }}" {{ $disabled ? 'disabled="disabled"' : '' }}></button>
	</div>

	<xf:if is="!$noPasswordStrength">
		<div class="inputPassword-strength-bar">{{ phrase('svPasswordTools_password_strength:') }} <span class="inputPassword-strength-bar--value">{{ phrase('svPasswordTools_password_strength_type.none') }}</span></div>
	</xf:if>

	<xf:js>
		<xf:if is="!$noPasswordStrength">
			jQuery.extend(true, XF.config, {
				passwordBlacklist: [<xf:trim>'{$xf.options.boardTitle|escape('js')}',<xf:foreach loop="$xf.options.svPasswordStrengthMeter_blacklist" value="$blacklistedWord">'{$blacklistedWord|escape('js')}',</xf:foreach></xf:trim>]
			});
		</xf:if>

		jQuery.extend(XF.phrases, {
			svPasswordTools_show_password: "{{ phrase('svPasswordTools_show_password')|escape('js') }}",
			svPasswordTools_hide_password: "{{ phrase('svPasswordTools_hide_password')|escape('js') }}"
			<xf:if is="!$noPasswordStrength">,
				svPasswordTools_password_strength_type_blacklisted: '{{ phrase('svPasswordTools_password_strength_type_blacklisted') }}',
				svPasswordTools_password_strength_type_none: "{{ phrase('svPasswordTools_password_strength_type.none') }}",
				svPasswordTools_password_strength_type_too_easy: "{{ phrase('svPasswordTools_password_strength_type.too_easy') }}",
				svPasswordTools_password_strength_type_easy: "{{ phrase('svPasswordTools_password_strength_type.easy') }}",
				svPasswordTools_password_strength_type_medium: "{{ phrase('svPasswordTools_password_strength_type.medium') }}",
				svPasswordTools_password_strength_type_hard: "{{ phrase('svPasswordTools_password_strength_type.hard') }}",
				svPasswordTools_password_strength_type_brutal: "{{ phrase('svPasswordTools_password_strength_type.brutal') }}"
			</xf:if>
		});
	</xf:js>
</xf:macro>